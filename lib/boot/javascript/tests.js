module.exports = 'var assert = require(\'chai\').assert,\n    estraparse = require(\'esprima-jquery-map\'),\n    sinon = require(\'sinon\');\n\ndescribe(\'problem\', function() {\n  before(function(){\n    this.tree = estraparse(code);\n  });\n\n  it("Within your `for` loop, you need to add an `if` statement.", function() {\n    assert(this.tree.find(\'forstatement ifstatement\').length > 0);  \n  });\n  it("Within the `if` statement, you\'ll need to halve the number of sheep and log the message \'Removing <number> sheep from the population. Phew!\' to the console.", function() {\n    var logInFor = this.tree.find("forstatement ifstatement identifier[name=\'console\']+identifier[name=\'log\']").length > 0;\n    assert(logInFor);\n  });\n\n  describe(\'with logging\', function() {\n    before(function() {\n      // var sandbox = new Sandbox({quiet: true, variables: {\n      //   sinon: sinon\n      // }});\n      // sandbox.evaluate(\'sinon.spy(console, "log");\');\n      // sandbox.evaluate(window.code);\n      // consoleLog = sandbox.evaluate(\'console.log\');\n\n      sinon.spy(console, \'log\');\n      eval(code);\n      consoleLog = console.log\n    });\n    after(function() {\n      //sandbox.destroy();\n      console.log.restore();\n    });\n    it("You are calling `console.log` too few times. This probably means the condition on your `if` statement is incorrect. Make sure it tests that `numSheep` is greater than 10000.", function() {\n      if(consoleLog.callCount < 18) { assert(false); }\n    });\n    it("You are calling `console.log` too many times. This probably means the condition on your `if` statement is incorrect. Make sure it tests that `numSheep` is greater than 10000.", function() {\n      if(consoleLog.callCount > 18) { assert(false); }\n    });\n    it("You\'re calling `console.log` the correct number of times, but not logging the correct messages. Are you diving the `numSheep` by 2 whenever there are more than 10000.", function() {\n      var numSheep = 4,\n          monthsToPrint = 12,\n          logNumber = 0,\n          logCall = \'\',\n          message = \'\';\n\n      for(var monthNumber = 1; monthNumber <= monthsToPrint; monthNumber++) {\n        if(numSheep > 10000) {\n          numSheep = numSheep/2;\n          logCall = consoleLog.getCall(logNumber++);\n          message = "Removing " + numSheep + " sheep from the population. Phew!";\n          assert(logCall.args[0] == message);\n        }\n        numSheep*=4;\n        logCall = consoleLog.getCall(logNumber++);\n        message = "There will be " + numSheep + " sheep after " + monthNumber + " month(s)!"\n        assert(logCall.args[0] == message);\n      }\n    });\n  });\n});';